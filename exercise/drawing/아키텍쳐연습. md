## 연습1
DMZ구성 해보기

![image](https://user-images.githubusercontent.com/19552819/98814534-25d7d580-2469-11eb-8b5d-50f2271ba3f6.png)

![image](https://user-images.githubusercontent.com/19552819/98814576-3425f180-2469-11eb-9ae4-44f52d30d8d5.png)

### note
- Firewall은 IP/Port기반으로 필터링한다.
  - 패킷 내부검사를 안하기 때문에
  - IDS/IPS 솔루션을 추가한다.
    - 근데 장비가 비싸다는데...
- APP이랑 DB,Storage랑 각각 다른 스위치에 물려놨는데
  - 굳이 나눌 필요가 있을까?
- Storage
  - 어떨때 검토?
    - 공용 스토리지가 필요할때
      - 한대의 서버에 연결해서 쓴다? -> DAS?
      - 다수의 서버에서 동시 접근이 필요하다? -> NAS?
        - NAS가 비싸서 한대 구성해서 다수의 서버에 공유?
    - 비용/안정선/구성/부하에 따라 어느걸 쓸지 고민한다.(당연하겠지만)

## 연습2
재해복구..?

![image](https://user-images.githubusercontent.com/19552819/98817267-368a4a80-246d-11eb-9708-fde5349fd5d9.png)

### note
- 형태에 따른
  - cold
    - 2차 시설에 기본적인 인프라 구축을 위한 공간을 마련한다.
    - 데이터 센터는 존재하나 내부 시설이 아무것도 구축되지 않은 상태?
    - RTO : 수 주 ~ 수 개월
  - warm
    - 주기적으로 시스템 및 데이터 백업 테이프를 원격지에 보관 및 소산하는 방식의 전통적인 백업 방식?
    - RTO : 수 일 ~ 수 주
  - hot
    - 주 센터와 백업 센터간 동일한 시스템을 구축하고 백업 센터에 데이터 사본을 항상 최신으로 유지
    - 주 센터 재해 발생 시, 백업 센터를 active로 전환하여 서비스 실시
    - RTO : 수 시간 이내
  - mirror
    - 주 센터와 백업 센터 간 동일한 시스템 이미지 구성 및 데이터를 구축하여 재해/장애 발생 시에도 영향이 없는 복제 시스템 구성
    - 주 센터와 백업 센터를 Active <-> Active하게 구성
    - RTO : 즉시
- 만약, hot이나 mirror site 형식으로 DR를 구성한다면
  - 위 구성도에서 서로간의 구성을 동일하게 해서 그려본다?
  - 그런데 비용 문제도 만만치 않을테니...
    - 재정 상황도 고려해서 어떤 DR을 구성할지 고려해본다.
    - 백업 센터가 주 센터의 50% 규모라면? -> 데이터 백업 서버를 두고, 최소한의 규모로 APP서버등을 올린다?
  - 백업의 형태는?
    - 동기
      - 둘 다 Active하게 운영될 경우, 정합성 유지를 위해 동기식으로 복제한다?
      - 한쪽 데이터 센터의 시스템으로 데이터가 들어오면, 반대쪽 데이터 센터에도 데이터가 저장되기까지 기다려야한다
      - 그렇기 때문에, 데이터 센터간 네트워크 성능에 영향을 많이 받는다?(나머지 반대쪽 시스템으로부터 응답을 기다려야하기 때문에.)
    - 비동기
      - 한쪽이 Active로 운영되고, 반대쪽이 Standby상태라면 비동기로 데이터를 보내도 괜찮지 않을까.
- 주 센터와 복제 센터간 트래픽 전환 또는 LoadBalancing
  - DNS 단에서 레코드 수정으로 전환?
    - DNS 캐시가 걱정되긴 하는데, 수 분 ~ 수 시간내로 전환이 된다?
  - DNS RR을 이용해 Active<->Active하게 운영?
    - 그런데
      - DNS RR은 응용 서버의 Health Check를 하지 않기 때문에, 일부 유저들은 다운된 서버로 연결이 요청된다.
      - 부하 상태를 알 수 없기 때문에, 부하를 고려하지 않고 요청을 보낸다.
      - 사용자의 지리적 위치를 고려하여 선택할 수 없다 등등..
    - 그래서 
      - GSLB를 이용하여 이러한 단점을 보안해 Global LoadBalancing을 한다.
      - GSLB 장비가 비싸다는데... DNS로 해도 괜찮을 정도인가...
    - 그렇다면
      - L3DSR 구성으로 데이터 센터간 Load Balancing이 가능하도록 하는건?
        - [카카오는 서로 다른곳에 각각 위치한 IDC라도 L3DSR 구성을 통해 Load Balancing이 가능하도록 사용하고 있습니다.](https://tech.kakao.com/2014/05/28/l3dsr/)
- IDC가 하나다?
  - 최소한 랙 단위로 클러스터를 구성한다...
